import{r as f,a as h,c as v,o as j,b as u,d as a,e as t,f as w,w as d,v as i,g as M,F as p,h as y,t as m,i as P,j as k,u as B,k as F}from"./app-DTKTnqIW.js";const R="/build/assets/logo-Bok5yppB.webp",T={class:"w-full bg-gray-50 flex-col min-h-screen flex items-center justify-center p-4 sm:p-6"},$={class:"w-full mx-auto p-6 sm:p-8 bg-white rounded-2xl border border-gray-300 flex flex-col md:flex-row gap-6 md:gap-10"},E={class:"flex-1 space-y-8"},D={class:"space-y-4"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},O=["value"],H={key:0},J={class:"mt-4 space-y-4"},L={class:"space-y-2"},Q={class:"flex items-center gap-2"},z={class:"flex items-center gap-2"},G={class:"border border-gray-200 bg-gray-50 rounded-xl p-4 space-y-4"},K={key:0,class:"flex-1"},W=["onChange"],X=["value"],Y={class:"flex-1"},Z=["onUpdate:modelValue"],ee={class:"flex-1"},te=["onInput","onUpdate:modelValue"],se={class:"flex-1"},oe=["onUpdate:modelValue"],le=["onClick"],re={class:"w-full md:w-[340px] bg-blue-50/30 rounded-2xl border border-blue-100 p-6 space-y-4 md:sticky md:top-4"},ne={class:"w-[80%]"},ue={class:"font-medium"},ae={class:"flex justify-between text-sm text-gray-700"},de={class:"flex justify-between text-sm font-semibold text-gray-800"},ie={class:"flex justify-between text-lg font-bold text-blue-900"},me={type:"submit",class:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg transition font-semibold"},pe={key:0},ye={key:1},fe={__name:"Home",props:["message"],setup(be){f(""),f("");const q=[{name:"Breeder seed",price:8},{name:"Foundation seed",price:5},{name:"Hybrid",price:10}],V=[{name:"Public Seed Company",id:1},{name:"Public Research Institute",id:2},{name:"Private Seed Company",id:3},{name:"Farmers’ Cooperative",id:4},{name:"Others (precise)",id:5}];let g={name:"",quantity:1,cost_per_kg:0,subtotal:0};const s=h({user:{full_name:"",phone:"",email:"",address:"",requester_type_id:null,custom_requester_type:""},order:{seed_class:"AfricaRice",total_quantity:0,total_cost:0},order_items:[{...g}]}),x=v(()=>s.order_items.reduce((l,e)=>l+Number(e.quantity||0),0)),b=v(()=>s.order_items.reduce((l,e)=>l+Number(e.cost_per_kg||0),0)),C=()=>{s.order_items.push({...g})},S=(l,e)=>{const o=JSON.parse(l.target.value);s.order_items[e].cost_per_kg=o.price,s.order_items[e].name=o.name,_(e)},_=l=>{s.order_items[l].subtotal=Number(s.order_items[l].cost_per_kg)*Number(s.order_items[l].quantity)};let c=f(!1);const U=l=>{s.order_items.splice(l,1)},N=async()=>{var e;if(s.order_items.length===0){alert("Veuillez ajouter au moins un élément à la commande.");return}if(!confirm("Êtes-vous sûr de vouloir envoyer cette commande ?"))return;c.value=!0;let l={...s};l.order.total_quantity=x.value,l.order.total_cost=b.value;try{const o=await axios.post("/orders",l);return alert("Commande envoyée avec succès !"),console.log("Commande envoyée avec succès :",o.data),o.data}catch(o){throw console.error("Erreur lors de l’envoi :",((e=o.response)==null?void 0:e.data)||o.message),o}finally{c.value=!1}};return j(()=>{}),(l,e)=>(a(),u("div",T,[e[28]||(e[28]=t("img",{src:R,class:"w-[150px] mb-5",alt:"Mon Logo"},null,-1)),t("form",{onSubmit:F(N,["prevent"]),class:"w-full max-w-6xl"},[t("div",$,[t("div",E,[t("div",D,[e[14]||(e[14]=t("h2",{class:"text-xl font-bold text-gray-800"},"Général informations",-1)),t("div",I,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Full Name",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.user.full_name=o),type:"text",required:"",placeholder:"Full name",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s.user.full_name]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Phone",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.user.phone=o),type:"text",required:"",placeholder:"Phone",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s.user.phone]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Email",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.user.email=o),type:"email",required:"",placeholder:"Email",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s.user.email]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Address",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.user.address=o),type:"text",required:"",placeholder:"Address",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s.user.address]])])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Type of requester",-1)),d(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.user.requester_type_id=o),required:"",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[(a(),u(p,null,y(V,(o,r)=>t("option",{value:o.id,key:r},m(o.name),9,O)),64))],512),[[M,s.user.requester_type_id]])]),s.user.requester_type_id==5?(a(),u("div",H,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Add requester type",-1)),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.user.custom_requester_type=o),type:"text",required:"",placeholder:"Add requester type",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s.user.custom_requester_type]])])):w("",!0)]),t("div",null,[e[22]||(e[22]=t("h2",{class:"text-xl font-bold text-gray-800"},[P(" Class of Seed "),t("span",{class:"text-sm font-normal"},"(Please tick one option)")],-1)),t("div",J,[t("div",L,[t("label",Q,[d(t("input",{required:"",type:"radio",value:"AfricaRice","onUpdate:modelValue":e[6]||(e[6]=o=>s.order.seed_class=o),class:"text-blue-600 focus:ring-blue-500"},null,512),[[k,s.order.seed_class]]),e[15]||(e[15]=t("span",{class:"text-sm font-medium text-gray-700"},"AfricaRice Mandated Seed Classes",-1))]),t("label",z,[d(t("input",{required:"",type:"radio",value:"Certified","onUpdate:modelValue":e[7]||(e[7]=o=>s.order.seed_class=o),class:"text-blue-600 focus:ring-blue-500"},null,512),[[k,s.order.seed_class]]),e[16]||(e[16]=t("span",{class:"text-sm font-medium text-gray-700"},"Certified Seed",-1))])]),t("div",G,[(a(!0),u(p,null,y(s.order_items,(o,r)=>(a(),u("div",{key:r,class:"border-b py-2 border-gray-200 flex flex-col md:flex-row gap-3 items-end"},[s.order.seed_class==="AfricaRice"?(a(),u("div",K,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Variety Type",-1)),t("select",{onChange:n=>S(n,r),class:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[17]||(e[17]=t("option",{disabled:"",value:""},"Variety Type",-1)),(a(),u(p,null,y(q,(n,A)=>t("option",{value:JSON.stringify(n),key:A},m(n.name),9,X)),64))],40,W)])):w("",!0),t("div",Y,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Variety Name",-1)),d(t("input",{required:"","onUpdate:modelValue":n=>s.order_items[r].name=n,type:"text",placeholder:"Variety Name",class:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,Z),[[i,s.order_items[r].name]])]),t("div",ee,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Quantity",-1)),d(t("input",{required:"",min:"1",type:"number",onInput:n=>_(r),"onUpdate:modelValue":n=>s.order_items[r].quantity=n,placeholder:"0",class:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,te),[[i,s.order_items[r].quantity]])]),t("div",se,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Cost per Kg (US$)",-1)),d(t("input",{required:"","onUpdate:modelValue":n=>s.order_items[r].cost_per_kg=n,readonly:"",disabled:"",class:"w-full text-sm bg-gray-100 border border-gray-300 rounded-lg px-3 py-2 text-gray-700"},null,8,oe),[[i,s.order_items[r].cost_per_kg]])]),t("button",{type:"button",onClick:n=>U(r),class:"text-red-600 hover:text-red-800 text-xl font-bold"},"×",8,le)]))),128)),t("button",{onClick:C,type:"button",class:"text-sm border border-blue-500 text-blue-600 hover:bg-blue-50 rounded-lg px-4 py-2 transition"}," + Add New ")])])])]),t("div",re,[e[26]||(e[26]=t("h3",{class:"text-xl font-semibold text-blue-800"},"Summary",-1)),(a(!0),u(p,null,y(s.order_items,(o,r)=>(a(),u("div",{key:r,class:"flex justify-between text-sm text-gray-800"},[t("span",ne,m(o.quantity)+"× "+m(o.name),1),t("span",ue,m(o.subtotal)+" $",1)]))),128)),e[27]||(e[27]=t("hr",null,null,-1)),t("div",ae,[e[23]||(e[23]=t("span",null,"Total quantity",-1)),t("span",null,m(x.value),1)]),t("div",de,[e[24]||(e[24]=t("span",null,"Subtotal",-1)),t("span",null,m(b.value)+" $",1)]),t("div",ie,[e[25]||(e[25]=t("span",null,"Due now",-1)),t("span",null,m(b.value)+" $",1)]),t("button",me,[B(c)?(a(),u("span",pe,"Processing...")):(a(),u("span",ye,"Submit now"))])])])],32)]))}};export{fe as default};
