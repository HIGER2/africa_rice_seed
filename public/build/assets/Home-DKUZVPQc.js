import{r as f,a as A,c as w,o as T,b as n,d as u,e as t,f as q,w as d,v as i,g as k,F as p,h as y,t as m,i as j,j as V,u as B,k as R}from"./app-Nc71HVAm.js";const F="/build/assets/logo-Bok5yppB.webp",$={class:"w-full bg-gray-50 flex-col min-h-screen flex items-center justify-center p-4 sm:p-6"},E={class:"w-full mx-auto p-6 sm:p-8 bg-white rounded-2xl border border-gray-300 flex flex-col md:flex-row gap-6 md:gap-10"},P={class:"flex-1 space-y-8"},D={class:"space-y-4"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},I=["value"],J={key:0},L={class:"mt-4 space-y-4"},O={class:"space-y-2"},Q={class:"flex items-center gap-2"},z={class:"flex items-center gap-2"},H={class:"border border-gray-200 bg-gray-50 rounded-xl p-4 space-y-4"},K={key:0,class:"flex-1"},W=["onChange"],X=["value"],Y={class:"flex-1"},Z=["onUpdate:modelValue"],h={class:"flex-1"},ee=["onInput","onUpdate:modelValue"],te={class:"flex-1"},se=["onUpdate:modelValue"],le=["onClick"],oe={class:"w-full md:w-[340px] bg-blue-50/30 rounded-2xl border border-blue-100 p-6 space-y-4 md:sticky md:top-4"},re={class:"w-[80%]"},ne={class:"font-medium"},ue={class:"flex justify-between text-sm text-gray-700"},de={class:"flex justify-between text-sm font-semibold text-gray-800"},ae={class:"flex justify-between text-lg font-bold text-blue-900"},ie={type:"submit",class:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg transition font-semibold"},me={key:0},pe={key:1},be={__name:"Home",props:["requesterType","variety"],setup(x){f(""),f("");let c={name:"",quantity:1,cost_per_kg:0,subtotal:0};const s=A({user:{full_name:"",phone:"",email:"",address:"",requester_type_id:"",custom_requester_type:"",gender:"",company:""},order:{seed_class:"AfricaRice_Mandated_Seed_Classes",total_quantity:0,total_cost:0},order_items:[{...c}]}),v=w(()=>s.order_items.reduce((o,e)=>o+Number(e.quantity||0),0)),b=w(()=>s.order_items.reduce((o,e)=>o+Number(e.subtotal||0),0)),S=()=>{s.order_items.push({...c})},C=(o,e)=>{const l=JSON.parse(o.target.value);s.order_items[e].cost_per_kg=l.price_per_kg,s.order_items[e].name=l.name,_(e)},_=o=>{s.order_items[o].subtotal=Number(s.order_items[o].cost_per_kg)*Number(s.order_items[o].quantity)};let g=f(!1);const U=o=>{s.order_items.splice(o,1)},N=async()=>{var e;if(s.order_items.length===0){alert("Veuillez ajouter au moins un élément à la commande.");return}if(!confirm("Êtes-vous sûr de vouloir envoyer cette commande ?"))return;g.value=!0;let o={...s};o.order.total_quantity=v.value,o.order.total_cost=b.value;try{const l=await axios.post("/orders",o);return alert("Commande envoyée avec succès !"),console.log("Commande envoyée avec succès :",l.data),l.data}catch(l){throw console.error("Erreur lors de l’envoi :",((e=l.response)==null?void 0:e.data)||l.message),l}finally{g.value=!1}};return T(()=>{}),(o,e)=>(u(),n("div",$,[e[34]||(e[34]=t("img",{src:F,class:"w-[150px] mb-5",alt:"Mon Logo"},null,-1)),e[35]||(e[35]=t("h2",{class:"text-lg mb-2"},"Welcome to Seed Request form / Bienvenu sur le formulaire de demande de semence",-1)),t("form",{onSubmit:R(N,["prevent"]),class:"w-full max-w-6xl"},[t("div",E,[t("div",P,[t("div",D,[e[20]||(e[20]=t("h2",{class:"text-xl font-bold text-gray-800"},"Général informations",-1)),t("div",G,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Full Name",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.user.full_name=l),type:"text",required:"",placeholder:"Family name & fistname",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s.user.full_name]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Gender",-1)),d(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.user.gender=l),name:"",id:"",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[11]||(e[11]=[t("option",{value:"",disabled:""},"Select gender",-1),t("option",{value:"male"},"Male",-1),t("option",{value:"female"},"Female",-1)]),512),[[k,s.user.gender]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Phone",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.user.phone=l),type:"text",required:"",placeholder:"Phone",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s.user.phone]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Email",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.user.email=l),type:"email",required:"",placeholder:"Email",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s.user.email]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Company name",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.user.company=l),type:"text",required:"",placeholder:"Company name",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s.user.company]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Address",-1)),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>s.user.address=l),type:"text",required:"",placeholder:"Address",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s.user.address]])])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Type of requester",-1)),d(t("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>s.user.requester_type_id=l),required:"",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[17]||(e[17]=t("option",{value:"",disabled:""},"Select Type of requester",-1)),(u(!0),n(p,null,y(x.requesterType,(l,r)=>(u(),n("option",{value:l.id,key:r},m(l.label),9,I))),128))],512),[[k,s.user.requester_type_id]])]),s.user.requester_type_id==5?(u(),n("div",J,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Add requester type",-1)),d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>s.user.custom_requester_type=l),type:"text",required:"",placeholder:"Add requester type",class:"w-full text-sm border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,s.user.custom_requester_type]])])):q("",!0)]),t("div",null,[e[28]||(e[28]=t("h2",{class:"text-xl font-bold text-gray-800"},[j(" Class of Seed "),t("span",{class:"text-sm font-normal"},"(Please tick one option)")],-1)),t("div",L,[t("div",O,[t("label",Q,[d(t("input",{required:"",type:"radio",value:"AfricaRice_Mandated_Seed_Classes","onUpdate:modelValue":e[8]||(e[8]=l=>s.order.seed_class=l),class:"text-blue-600 focus:ring-blue-500"},null,512),[[V,s.order.seed_class]]),e[21]||(e[21]=t("span",{class:"text-sm font-medium text-gray-700"},"AfricaRice Mandated Seed Classes",-1))]),t("label",z,[d(t("input",{required:"",type:"radio",value:"Certified_Seed","onUpdate:modelValue":e[9]||(e[9]=l=>s.order.seed_class=l),class:"text-blue-600 focus:ring-blue-500"},null,512),[[V,s.order.seed_class]]),e[22]||(e[22]=t("span",{class:"text-sm font-medium text-gray-700"},"Certified Seed",-1))])]),t("div",H,[(u(!0),n(p,null,y(s.order_items,(l,r)=>(u(),n("div",{key:r,class:"border-b py-2 border-gray-200 flex flex-col md:flex-row gap-3 items-end"},[s.order.seed_class==="AfricaRice_Mandated_Seed_Classes"?(u(),n("div",K,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Variety Type",-1)),t("select",{onChange:a=>C(a,r),value:"",class:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[23]||(e[23]=t("option",{disabled:"",value:""},"Variety Type",-1)),(u(!0),n(p,null,y(x.variety,(a,M)=>(u(),n("option",{value:JSON.stringify(a),key:M},m(a.name),9,X))),128))],40,W)])):q("",!0),t("div",Y,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Variety Name",-1)),d(t("input",{required:"","onUpdate:modelValue":a=>s.order_items[r].name=a,type:"text",placeholder:"Variety Name",class:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,Z),[[i,s.order_items[r].name]])]),t("div",h,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Quantity",-1)),d(t("input",{required:"",min:"1",type:"number",onInput:()=>_(r),"onUpdate:modelValue":a=>s.order_items[r].quantity=a,placeholder:"0",class:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,ee),[[i,s.order_items[r].quantity]])]),t("div",te,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Cost per Kg (US$)",-1)),d(t("input",{required:"","onUpdate:modelValue":a=>s.order_items[r].cost_per_kg=a,readonly:"",disabled:"",class:"w-full text-sm bg-gray-100 border border-gray-300 rounded-lg px-3 py-2 text-gray-700"},null,8,se),[[i,s.order_items[r].cost_per_kg]])]),t("button",{type:"button",onClick:a=>U(r),class:"text-red-600 hover:text-red-800 text-xl font-bold"},"×",8,le)]))),128)),t("button",{onClick:S,type:"button",class:"text-sm border border-blue-500 text-blue-600 hover:bg-blue-50 rounded-lg px-4 py-2 transition"}," + Add New ")])])])]),t("div",oe,[e[32]||(e[32]=t("h3",{class:"text-xl font-semibold text-blue-800"},"Summary",-1)),(u(!0),n(p,null,y(s.order_items,(l,r)=>(u(),n("div",{key:r,class:"flex justify-between text-sm text-gray-800"},[t("span",re,m(l.quantity)+"× "+m(l.name),1),t("span",ne,m(l.subtotal)+" $",1)]))),128)),e[33]||(e[33]=t("hr",null,null,-1)),t("div",ue,[e[29]||(e[29]=t("span",null,"Total quantity",-1)),t("span",null,m(v.value),1)]),t("div",de,[e[30]||(e[30]=t("span",null,"Subtotal",-1)),t("span",null,m(b.value)+" $",1)]),t("div",ae,[e[31]||(e[31]=t("span",null,"Due now",-1)),t("span",null,m(b.value)+" $",1)]),t("button",ie,[B(g)?(u(),n("span",me,"Processing...")):(u(),n("span",pe,"Submit now"))])])])],32)]))}};export{be as default};
